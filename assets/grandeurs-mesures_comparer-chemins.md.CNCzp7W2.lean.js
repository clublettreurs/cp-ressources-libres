import{_ as me,p as f,v as ge,P as re,x as xe,c as j,o as J,e as ye,j as o,k as m,a0 as pe,a1 as ie,a2 as be,a3 as Ce,n as G,t as Me,G as _e}from"./chunks/framework.C0mo_YSU.js";const ke={class:"exercise-wrapper"},we={key:0,id:"confettiCanvasChemins",class:"confetti-canvas"},Pe={class:"menu-overlay"},Te={class:"menu-card"},Le={class:"etalon-wrapper"},Ee={class:"bottom-bar"},Re={class:"answer-section"},Se={class:"path-buttons"},ce=80,Ie={__name:"ComparerChemins",setup(ue){const y=f(null),c=f(null),r=f(null),U=f(null);let n=null,R=[],S=!1,I=!1,A={x:0,y:0},$=0,M=f(""),_=f(""),k=f(!1),h=f(!1),g={x:0,y:0},x={x:0,y:0},d=[],v=[],D=0,B=0,K="",p=f(""),q=[],N=null,w=0,b=0;function H(){if(!y.value||!c.value)return;const e=y.value.getBoundingClientRect(),t=window.devicePixelRatio||1;w=e.width,b=e.height,c.value.width=e.width*t,c.value.height=e.height*t,c.value.style.width=e.width+"px",c.value.style.height=e.height+"px",n=c.value.getContext("2d"),n.setTransform(t,0,0,t,0,0),r.value&&(r.value.style.left=(w-80)/2+"px",r.value.style.top=b-40+"px"),Q()}function Q(){r.value&&(r.value.style.transform=`rotate(${$}deg)`)}function Y(){if(!c.value||(n||(n=c.value.getContext("2d")),!n))return;R=[],M.value="",_.value="",p.value="",k.value=!1,W();const e=w,t=b;if(e===0||t===0)return;const a=e/6;g={x:a,y:t/2},x={x:e-a,y:t/2};const s=Math.random()<.5;let l=0;do{s?(d=V(g,x,2,-1,.2),v=V(g,x,3,1,1.5)):(d=V(g,x,3,-1,1.5),v=V(g,x,2,1,.2)),D=Z(d),B=Z(v),l++;const u=Math.min(D,B);if((Math.max(D,B)-u)/u>=.3)break}while(l<50);K=D<B?"vert":"rose",F()}function V(e,t,a,s,l=.5){const u=[{...e}],T=(t.x-e.x)/a;for(let i=1;i<a;i++){const L=e.x+T*i+(Math.random()-.5)*30,E=40+l*80,z=s*(Math.random()*E+30+l*50),O=e.y+z+(Math.random()-.5)*20;u.push({x:L,y:Math.max(80,Math.min(b-120,O))})}return u.push({...t}),u}function Z(e){let t=0;for(let a=0;a<e.length-1;a++){const s=e[a+1].x-e[a].x,l=e[a+1].y-e[a].y;t+=Math.sqrt(s*s+l*l)}return t}function ee(e,t){if(e.length<2)return;n.strokeStyle=t,n.lineWidth=4,n.lineCap="round";const a=e[1],s=a.x-e[0].x,l=a.y-e[0].y,u=Math.sqrt(s*s+l*l),P=-l/u*12,T=s/u*12;n.beginPath(),n.moveTo(e[0].x+P,e[0].y+T),n.lineTo(e[0].x-P,e[0].y-T),n.stroke();const i=e.length-1,L=e[i].x-e[i-1].x,E=e[i].y-e[i-1].y,z=Math.sqrt(L*L+E*E),O=-E/z*12,le=L/z*12;n.beginPath(),n.moveTo(e[i].x+O,e[i].y+le),n.lineTo(e[i].x-O,e[i].y-le),n.stroke()}function F(){if(!(!n||!c.value)&&(n.clearRect(0,0,w,b),!(d.length===0||v.length===0))){n.strokeStyle="#aed6ba",n.lineWidth=6,n.lineCap="round",n.lineJoin="round",n.beginPath(),n.moveTo(d[0].x,d[0].y);for(let e=1;e<d.length;e++)n.lineTo(d[e].x,d[e].y);n.stroke(),ee(d,"#aed6ba"),n.strokeStyle="#f19bb1",n.lineWidth=6,n.beginPath(),n.moveTo(v[0].x,v[0].y);for(let e=1;e<v.length;e++)n.lineTo(v[e].x,v[e].y);n.stroke(),ee(v,"#f19bb1"),n.font="70px serif",n.textAlign="center",n.textBaseline="middle",n.fillText("üè†",g.x-60,g.y),n.fillText("üè´",x.x+60,x.y),R.forEach(e=>{n.strokeStyle="#e84f6d",n.lineWidth=3,n.lineCap="round";const t=15,a=e.angle+Math.PI/2;n.beginPath(),n.moveTo(e.x+t*Math.cos(a),e.y+t*Math.sin(a)),n.lineTo(e.x-t*Math.cos(a),e.y-t*Math.sin(a)),n.stroke()})}}function te(e){return e.touches&&e.touches.length>0?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}function ne(e){if(e.target===U.value)return;e.preventDefault(),S=!0,r.value.classList.add("dragging");const t=r.value.getBoundingClientRect(),a=te(e);A.x=a.x-t.left,A.y=a.y-t.top-5}function ae(e){e.stopPropagation(),e.preventDefault(),I=!0}function X(e){if(!y.value||!r.value||!S&&!I)return;e.preventDefault();const t=te(e),a=y.value.getBoundingClientRect();if(S){let s=t.x-a.left-A.x,l=t.y-a.top-A.y;s=Math.max(10,Math.min(a.width-20,s)),l=Math.max(30,Math.min(a.height-30,l)),r.value.style.left=s+"px",r.value.style.top=l+"px"}if(I){const s=r.value.getBoundingClientRect(),l=s.left,u=s.top+5;$=Math.atan2(t.y-u,t.x-l)*180/Math.PI,Q()}}function C(){S=!1,I=!1,r.value&&r.value.classList.remove("dragging")}function de(){const e=$*Math.PI/180,t=parseFloat(r.value.style.left)||0,a=(parseFloat(r.value.style.top)||0)+3,s=t+ce*Math.cos(e),l=a+ce*Math.sin(e);R.push({x:s,y:l,angle:e}),F()}function ve(){R=[],F()}function se(e){p.value=e}function he(){if(!p.value){M.value="Choisis un chemin !",_.value="error";return}p.value===K?(M.value="üéâ Bravo ! C'est exact !",_.value="success",fe()):(M.value="‚ùå Essaie encore !",_.value="error",k.value=!1,W())}function fe(){k.value=!0,q=[];const e=["#2bb0a3","#aed6ba","#2e59a6","#53c2e2","#e84f6d","#f19bb1"];for(let t=0;t<150;t++)q.push({x:Math.random()*window.innerWidth,y:-20-Math.random()*100,size:Math.random()*10+5,color:e[Math.floor(Math.random()*e.length)],speedX:(Math.random()-.5)*4,speedY:Math.random()*3+2,rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*10});re(()=>{oe()})}function oe(){const e=document.getElementById("confettiCanvasChemins");if(!e)return;const t=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight,t.clearRect(0,0,e.width,e.height);let a=0;q.forEach(s=>{s.x+=s.speedX,s.y+=s.speedY,s.rotation+=s.rotationSpeed,s.speedY+=.1,s.y<e.height+20&&(a++,t.save(),t.translate(s.x,s.y),t.rotate(s.rotation*Math.PI/180),t.fillStyle=s.color,t.fillRect(-s.size/2,-s.size/4,s.size,s.size/2),t.restore())}),a>0&&k.value?N=requestAnimationFrame(oe):W()}function W(){N&&(cancelAnimationFrame(N),N=null)}return ge(()=>{re(()=>{setTimeout(()=>{H(),w>0&&b>0?Y():setTimeout(()=>{H(),Y()},100)},50)}),document.addEventListener("mousemove",X),document.addEventListener("mouseup",C),document.addEventListener("touchmove",X,{passive:!1}),document.addEventListener("touchend",C),document.addEventListener("touchcancel",C),window.addEventListener("resize",()=>{H(),Y()})}),xe(()=>{document.removeEventListener("mousemove",X),document.removeEventListener("mouseup",C),document.removeEventListener("touchmove",X),document.removeEventListener("touchend",C),document.removeEventListener("touchcancel",C),W()}),(e,t)=>(J(),j("div",ke,[m(k)?(J(),j("canvas",we)):ye("",!0),o("div",Pe,[o("div",{class:"menu-toggle",onClick:t[0]||(t[0]=a=>ie(h)?h.value=!m(h):h=!m(h))},[...t[4]||(t[4]=[o("span",{class:"burger-line"},null,-1),o("span",{class:"burger-line"},null,-1),o("span",{class:"burger-line"},null,-1)])]),pe(o("div",Te,[o("div",{class:"menu-close",onClick:t[1]||(t[1]=a=>ie(h)?h.value=!1:h=!1)},"‚úï"),t[5]||(t[5]=Ce("",2))],512),[[be,m(h)]])]),o("div",{class:"canvas-container",ref_key:"canvasContainer",ref:y},[o("canvas",{ref_key:"canvas",ref:c},null,512),o("div",{class:"etalon-container",ref_key:"etalonContainer",ref:r,onMousedown:ne,onTouchstart:ne},[o("div",Le,[t[6]||(t[6]=o("div",{class:"etalon"},[o("div",{class:"etalon-arrow"})],-1)),o("div",{class:"rotate-handle",ref_key:"rotateHandle",ref:U,onMousedown:ae,onTouchstart:ae},null,544)])],544)],512),o("div",Ee,[o("div",{class:"controls"},[o("button",{class:"btn btn-mark",onClick:de},"Rep√®re"),o("button",{class:"btn btn-clear",onClick:ve},"Effacer"),o("button",{class:"btn btn-new",onClick:Y},"Nouveau")]),o("div",Re,[t[7]||(t[7]=o("div",{class:"answer-label"},"Le plus court :",-1)),o("div",Se,[o("button",{class:G(["btn-path btn-vert",{selected:m(p)==="vert"}]),onClick:t[2]||(t[2]=a=>se("vert"))}," Vert ",2),o("button",{class:G(["btn-path btn-rose",{selected:m(p)==="rose"}]),onClick:t[3]||(t[3]=a=>se("rose"))}," Rose ",2)]),o("button",{class:"btn btn-check",onClick:he},"V√©rifier"),o("div",{class:G(["feedback",m(_)])},Me(m(M)),3)])])]))}},Ae=me(Ie,[["__scopeId","data-v-07a4ce0a"]]),Ne=JSON.parse('{"title":"","description":"","frontmatter":{"layout":false},"headers":[],"relativePath":"grandeurs-mesures/comparer-chemins.md","filePath":"grandeurs-mesures/comparer-chemins.md"}'),De={name:"grandeurs-mesures/comparer-chemins.md"},Ye=Object.assign(De,{setup(ue){return(y,c)=>(J(),j("div",null,[_e(Ae)]))}});export{Ne as __pageData,Ye as default};
