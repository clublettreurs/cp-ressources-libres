import{_ as ge,p as m,v as xe,P as ie,x as ye,c as J,o as U,e as pe,j as o,k as h,a0 as be,Z as ce,a1 as O,a2 as Ce,a3 as Me,n as j,t as _e,G as we}from"./chunks/framework.C0mo_YSU.js";const ke={class:"exercise-wrapper"},Pe={key:0,id:"confettiCanvasChemins",class:"confetti-canvas"},Te={class:"menu-overlay"},Le={class:"menu-card"},Ee={class:"etalon-wrapper"},Re={class:"bottom-bar"},Se={class:"answer-section"},Ie={class:"path-buttons"},ue=80,Ae={__name:"ComparerChemins",setup(de){const y=m(null),u=m(null),i=m(null),Z=m(null);let n=null,R=[],S=!1,I=!1,A={x:0,y:0},q=0,M=m(""),_=m(""),w=m(!1),r=m(!1),g={x:0,y:0},x={x:0,y:0},v=[],f=[],D=0,B=0,K="",p=m(""),H=[],N=null,k=0,b=0;function F(){if(!y.value||!u.value)return;const e=y.value.getBoundingClientRect(),t=window.devicePixelRatio||1;k=e.width,b=e.height,u.value.width=e.width*t,u.value.height=e.height*t,u.value.style.width=e.width+"px",u.value.style.height=e.height+"px",n=u.value.getContext("2d"),n.setTransform(t,0,0,t,0,0),i.value&&(i.value.style.left=(k-80)/2+"px",i.value.style.top=b-40+"px"),Q()}function Q(){i.value&&(i.value.style.transform=`rotate(${q}deg)`)}function Y(){if(!u.value||(n||(n=u.value.getContext("2d")),!n))return;R=[],M.value="",_.value="",p.value="",w.value=!1,W();const e=k,t=b;if(e===0||t===0)return;const a=e/6;g={x:a,y:t/2},x={x:e-a,y:t/2};const s=Math.random()<.5;let l=0;do{s?(v=V(g,x,2,-1,.2),f=V(g,x,3,1,1.5)):(v=V(g,x,3,-1,1.5),f=V(g,x,2,1,.2)),D=ee(v),B=ee(f),l++;const d=Math.min(D,B);if((Math.max(D,B)-d)/d>=.3)break}while(l<50);K=D<B?"vert":"rose",G()}function V(e,t,a,s,l=.5){const d=[{...e}],T=(t.x-e.x)/a;for(let c=1;c<a;c++){const L=e.x+T*c+(Math.random()-.5)*30,E=40+l*80,$=s*(Math.random()*E+30+l*50),z=e.y+$+(Math.random()-.5)*20;d.push({x:L,y:Math.max(80,Math.min(b-120,z))})}return d.push({...t}),d}function ee(e){let t=0;for(let a=0;a<e.length-1;a++){const s=e[a+1].x-e[a].x,l=e[a+1].y-e[a].y;t+=Math.sqrt(s*s+l*l)}return t}function te(e,t){if(e.length<2)return;n.strokeStyle=t,n.lineWidth=4,n.lineCap="round";const a=e[1],s=a.x-e[0].x,l=a.y-e[0].y,d=Math.sqrt(s*s+l*l),P=-l/d*12,T=s/d*12;n.beginPath(),n.moveTo(e[0].x+P,e[0].y+T),n.lineTo(e[0].x-P,e[0].y-T),n.stroke();const c=e.length-1,L=e[c].x-e[c-1].x,E=e[c].y-e[c-1].y,$=Math.sqrt(L*L+E*E),z=-E/$*12,re=L/$*12;n.beginPath(),n.moveTo(e[c].x+z,e[c].y+re),n.lineTo(e[c].x-z,e[c].y-re),n.stroke()}function G(){if(!(!n||!u.value)&&(n.clearRect(0,0,k,b),!(v.length===0||f.length===0))){n.strokeStyle="#aed6ba",n.lineWidth=6,n.lineCap="round",n.lineJoin="round",n.beginPath(),n.moveTo(v[0].x,v[0].y);for(let e=1;e<v.length;e++)n.lineTo(v[e].x,v[e].y);n.stroke(),te(v,"#aed6ba"),n.strokeStyle="#f19bb1",n.lineWidth=6,n.beginPath(),n.moveTo(f[0].x,f[0].y);for(let e=1;e<f.length;e++)n.lineTo(f[e].x,f[e].y);n.stroke(),te(f,"#f19bb1"),n.font="70px serif",n.textAlign="center",n.textBaseline="middle",n.fillText("üè†",g.x-60,g.y),n.fillText("üè´",x.x+60,x.y),R.forEach(e=>{n.strokeStyle="#e84f6d",n.lineWidth=3,n.lineCap="round";const t=15,a=e.angle+Math.PI/2;n.beginPath(),n.moveTo(e.x+t*Math.cos(a),e.y+t*Math.sin(a)),n.lineTo(e.x-t*Math.cos(a),e.y-t*Math.sin(a)),n.stroke()})}}function ne(e){return e.touches&&e.touches.length>0?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}function ae(e){if(e.target===Z.value)return;e.preventDefault(),S=!0,i.value.classList.add("dragging");const t=i.value.getBoundingClientRect(),a=ne(e);A.x=a.x-t.left,A.y=a.y-t.top-5}function se(e){e.stopPropagation(),e.preventDefault(),I=!0}function X(e){if(!y.value||!i.value||!S&&!I)return;e.preventDefault();const t=ne(e),a=y.value.getBoundingClientRect();if(S){let s=t.x-a.left-A.x,l=t.y-a.top-A.y;s=Math.max(10,Math.min(a.width-20,s)),l=Math.max(30,Math.min(a.height-30,l)),i.value.style.left=s+"px",i.value.style.top=l+"px"}if(I){const s=i.value.getBoundingClientRect(),l=s.left,d=s.top+5;q=Math.atan2(t.y-d,t.x-l)*180/Math.PI,Q()}}function C(){S=!1,I=!1,i.value&&i.value.classList.remove("dragging")}function ve(){const e=q*Math.PI/180,t=parseFloat(i.value.style.left)||0,a=(parseFloat(i.value.style.top)||0)+3,s=t+ue*Math.cos(e),l=a+ue*Math.sin(e);R.push({x:s,y:l,angle:e}),G()}function fe(){R=[],G()}function oe(e){p.value=e}function he(){if(!p.value){M.value="Choisis un chemin !",_.value="error";return}p.value===K?(M.value="üéâ Bravo ! C'est exact !",_.value="success",me()):(M.value="‚ùå Essaie encore !",_.value="error",w.value=!1,W())}function me(){w.value=!0,H=[];const e=["#2bb0a3","#aed6ba","#2e59a6","#53c2e2","#e84f6d","#f19bb1"];for(let t=0;t<150;t++)H.push({x:Math.random()*window.innerWidth,y:-20-Math.random()*100,size:Math.random()*10+5,color:e[Math.floor(Math.random()*e.length)],speedX:(Math.random()-.5)*4,speedY:Math.random()*3+2,rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*10});ie(()=>{le()})}function le(){const e=document.getElementById("confettiCanvasChemins");if(!e)return;const t=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight,t.clearRect(0,0,e.width,e.height);let a=0;H.forEach(s=>{s.x+=s.speedX,s.y+=s.speedY,s.rotation+=s.rotationSpeed,s.speedY+=.1,s.y<e.height+20&&(a++,t.save(),t.translate(s.x,s.y),t.rotate(s.rotation*Math.PI/180),t.fillStyle=s.color,t.fillRect(-s.size/2,-s.size/4,s.size,s.size/2),t.restore())}),a>0&&w.value?N=requestAnimationFrame(le):W()}function W(){N&&(cancelAnimationFrame(N),N=null)}return xe(()=>{ie(()=>{setTimeout(()=>{F(),k>0&&b>0?Y():setTimeout(()=>{F(),Y()},100)},50)}),document.addEventListener("mousemove",X),document.addEventListener("mouseup",C),document.addEventListener("touchmove",X,{passive:!1}),document.addEventListener("touchend",C),document.addEventListener("touchcancel",C),window.addEventListener("resize",()=>{F(),Y()})}),ye(()=>{document.removeEventListener("mousemove",X),document.removeEventListener("mouseup",C),document.removeEventListener("touchmove",X),document.removeEventListener("touchend",C),document.removeEventListener("touchcancel",C),W()}),(e,t)=>(U(),J("div",ke,[h(w)?(U(),J("canvas",Pe)):pe("",!0),o("div",Te,[o("div",{class:"menu-toggle",onClick:t[0]||(t[0]=a=>O(r)?r.value=!h(r):r=!h(r)),onTouchend:t[1]||(t[1]=ce(a=>O(r)?r.value=!h(r):r=!h(r),["prevent"]))},[...t[6]||(t[6]=[o("span",{class:"burger-line"},null,-1),o("span",{class:"burger-line"},null,-1),o("span",{class:"burger-line"},null,-1)])],32),be(o("div",Le,[o("div",{class:"menu-close",onClick:t[2]||(t[2]=a=>O(r)?r.value=!1:r=!1),onTouchend:t[3]||(t[3]=ce(a=>O(r)?r.value=!1:r=!1,["prevent"]))},"‚úï",32),t[7]||(t[7]=Me('<div class="menu-section" data-v-02c24448><strong data-v-02c24448>üìç Navigation</strong><ul data-v-02c24448><li data-v-02c24448><a href="/cp-ressources-libres/" data-v-02c24448>üè† Accueil</a></li><li data-v-02c24448><a href="/cp-ressources-libres/grandeurs-mesures/" data-v-02c24448>üìè Grandeurs et mesures</a></li><li data-v-02c24448><a href="/cp-ressources-libres/grandeurs-mesures/comparer-chemins" data-v-02c24448>‚Ä¢ Comparer chemins</a></li></ul></div><div class="menu-section" data-v-02c24448><strong data-v-02c24448>‚ùì Instructions</strong><ol data-v-02c24448><li data-v-02c24448>Mesure chaque chemin avec l&#39;√©talon</li><li data-v-02c24448>Choisis le chemin le plus court</li><li data-v-02c24448>V√©rifie ta r√©ponse</li></ol></div>',2))],512),[[Ce,h(r)]])]),o("div",{class:"canvas-container",ref_key:"canvasContainer",ref:y},[o("canvas",{ref_key:"canvas",ref:u},null,512),o("div",{class:"etalon-container",ref_key:"etalonContainer",ref:i,onMousedown:ae,onTouchstart:ae},[o("div",Ee,[t[8]||(t[8]=o("div",{class:"etalon"},[o("div",{class:"etalon-arrow"})],-1)),o("div",{class:"rotate-handle",ref_key:"rotateHandle",ref:Z,onMousedown:se,onTouchstart:se},null,544)])],544)],512),o("div",Re,[o("div",{class:"controls"},[o("button",{class:"btn btn-mark",onClick:ve},"Rep√®re"),o("button",{class:"btn btn-clear",onClick:fe},"Effacer"),o("button",{class:"btn btn-new",onClick:Y},"Nouveau")]),o("div",Se,[t[9]||(t[9]=o("div",{class:"answer-label"},"Le plus court :",-1)),o("div",Ie,[o("button",{class:j(["btn-path btn-vert",{selected:h(p)==="vert"}]),onClick:t[4]||(t[4]=a=>oe("vert"))}," Vert ",2),o("button",{class:j(["btn-path btn-rose",{selected:h(p)==="rose"}]),onClick:t[5]||(t[5]=a=>oe("rose"))}," Rose ",2)]),o("button",{class:"btn btn-check",onClick:he},"V√©rifier"),o("div",{class:j(["feedback",h(_)])},_e(h(M)),3)])])]))}},De=ge(Ae,[["__scopeId","data-v-02c24448"]]),Ye=JSON.parse('{"title":"","description":"","frontmatter":{"layout":false},"headers":[],"relativePath":"grandeurs-mesures/comparer-chemins.md","filePath":"grandeurs-mesures/comparer-chemins.md"}'),Be={name:"grandeurs-mesures/comparer-chemins.md"},Ve=Object.assign(Be,{setup(de){return(y,u)=>(U(),J("div",null,[we(De)]))}});export{Ye as __pageData,Ve as default};
