import{_ as ee,p as v,v as te,P as q,x as ne,c as I,o as B,e as ae,j as a,k as P,a0 as se,Z as W,a2 as oe,a3 as ie,t as $,n as le,G as re}from"./chunks/framework.C0mo_YSU.js";const ce={class:"exercise-wrapper"},ue={key:0,id:"confettiCanvas",class:"confetti-canvas"},de={class:"menu-overlay"},ve={class:"menu-card"},fe={class:"bottom-bar"},he={class:"answer-section"},me={class:"answer-input"},be={class:"answer-display"},C=80,R=40,k=40,ge={__name:"MesureEtalon",setup(G){const x=v(null),o=v(null);let n=null;const c=v(!1);let g=[],p=v(""),_=v(""),w=v(!1),S=[],y=null,u=50,f=100,A=!1,X=0,Y=0,l=0,r=0,h=0,D=0,d=v(0),m=0,b=0;function L(){if(!x.value)return;const t=x.value.getBoundingClientRect(),e=window.devicePixelRatio||1;m=t.width,b=t.height,o.value.width=t.width*e,o.value.height=t.height*e,o.value.style.width=t.width+"px",o.value.style.height=t.height+"px",n=o.value.getContext("2d"),n.setTransform(e,0,0,e,0,0)}function T(){!o.value||!n||(g=[],p.value="",_.value="",d.value=0,w.value=!1,M(),D=Math.floor(Math.random()*4)+3,h=D*C,l=(m-h)/2,r=b/2-k/2,u=(m-C)/2,f=b-R-20,E())}function E(){if(!n||!o.value)return;n.clearRect(0,0,m,b),n.fillStyle="#aed6ba",n.fillRect(l,r,h,k),n.strokeStyle="#000",n.lineWidth=3,n.lineCap="round",n.beginPath(),n.moveTo(l,r-8),n.lineTo(l,r+k+8),n.stroke(),n.beginPath(),n.moveTo(l+h,r-8),n.lineTo(l+h,r+k+8),n.stroke(),g.forEach(e=>{n.strokeStyle="#e84f6d",n.lineWidth=3,n.beginPath(),n.moveTo(e.x,r-10),n.lineTo(e.x,r+k+10),n.stroke()});const t=2;n.fillStyle="#fbb90d",n.beginPath(),n.roundRect(u,f,C,R,t),n.fill()}function z(t){const e=o.value.getBoundingClientRect(),i=m/e.width,s=b/e.height;return t.touches?{x:(t.touches[0].clientX-e.left)*i,y:(t.touches[0].clientY-e.top)*s}:{x:(t.clientX-e.left)*i,y:(t.clientY-e.top)*s}}function j(t,e){return t>=u&&t<=u+C&&e>=f-15&&e<=f+R+15}function H(t){t.preventDefault();const e=z(t);j(e.x,e.y)&&(A=!0,X=e.x-u,Y=e.y-f)}function O(t){if(!A)return;t.preventDefault();const e=z(t);u=e.x-X,f=e.y-Y,E()}function N(t){A=!1}function F(){const t=u+C;t>=l&&t<=l+h+5&&(g.some(i=>Math.abs(i.x-t)<10)||(g.push({x:t}),E()))}function J(){g=[],p.value="",_.value="",d.value=0,E()}function U(){d.value++}function Z(){d.value>0&&d.value--}function K(){d.value===D?(p.value="ğŸ‰ Bravo ! C'est exact !",_.value="success",Q()):(p.value="âŒ Essaie encore !",_.value="error",w.value=!1,M())}function Q(){w.value=!0,S=[];const t=["#2bb0a3","#aed6ba","#2e59a6","#53c2e2","#e84f6d","#f19bb1"];for(let e=0;e<150;e++)S.push({x:Math.random()*window.innerWidth,y:-20-Math.random()*100,size:Math.random()*10+5,color:t[Math.floor(Math.random()*t.length)],speedX:(Math.random()-.5)*4,speedY:Math.random()*3+2,rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*10});q(()=>{V()})}function V(){const t=document.getElementById("confettiCanvas");if(!t)return;const e=t.getContext("2d");t.width=window.innerWidth,t.height=window.innerHeight,e.clearRect(0,0,t.width,t.height);let i=0;S.forEach(s=>{s.x+=s.speedX,s.y+=s.speedY,s.rotation+=s.rotationSpeed,s.speedY+=.1,s.y<t.height+20&&(i++,e.save(),e.translate(s.x,s.y),e.rotate(s.rotation*Math.PI/180),e.fillStyle=s.color,e.fillRect(-s.size/2,-s.size/4,s.size,s.size/2),e.restore())}),i>0&&w.value?y=requestAnimationFrame(V):M()}function M(){y&&(cancelAnimationFrame(y),y=null)}return te(()=>{q(()=>{setTimeout(()=>{L(),m>0&&b>0?T():setTimeout(()=>{L(),T()},100)},50)}),o.value.addEventListener("mousedown",H),o.value.addEventListener("mousemove",O),o.value.addEventListener("mouseup",N),o.value.addEventListener("mouseleave",N),o.value.addEventListener("touchstart",H,{passive:!1}),o.value.addEventListener("touchmove",O,{passive:!1}),o.value.addEventListener("touchend",N),window.addEventListener("resize",()=>{L(),T()})}),ne(()=>{M()}),(t,e)=>(B(),I("div",ce,[P(w)?(B(),I("canvas",ue)):ae("",!0),a("div",de,[a("div",{class:"menu-toggle",onClick:e[0]||(e[0]=i=>c.value=!c.value),onTouchend:e[1]||(e[1]=W(i=>c.value=!c.value,["prevent"]))},[...e[4]||(e[4]=[a("span",{class:"burger-line"},null,-1),a("span",{class:"burger-line"},null,-1),a("span",{class:"burger-line"},null,-1)])],32),se(a("div",ve,[a("div",{class:"menu-close",onClick:e[2]||(e[2]=i=>c.value=!1),onTouchend:e[3]||(e[3]=W(i=>c.value=!1,["prevent"]))},"âœ•",32),e[5]||(e[5]=ie('<div class="menu-section" data-v-22b77608><strong data-v-22b77608>ğŸ“ Navigation</strong><ul data-v-22b77608><li data-v-22b77608><a href="/cp-ressources-libres/" data-v-22b77608>ğŸ  Accueil</a></li><li data-v-22b77608><a href="/cp-ressources-libres/grandeurs-mesures/" data-v-22b77608>ğŸ“ Grandeurs et mesures</a></li><li data-v-22b77608><a href="/cp-ressources-libres/ecriture/" data-v-22b77608>âœï¸ Ã‰criture</a></li></ul></div><div class="menu-section" data-v-22b77608><strong data-v-22b77608>â“ Instructions</strong><p data-v-22b77608>DÃ©place l&#39;Ã©talon jaune sur la bande bleue.</p><p data-v-22b77608>Clique sur &quot;RepÃ¨re&quot; pour marquer chaque mesure.</p><p data-v-22b77608>Compte combien d&#39;Ã©talons rentrent dans la bande.</p></div>',2))],512),[[oe,c.value]])]),a("div",{class:"canvas-container",ref_key:"canvasContainer",ref:x},[a("canvas",{ref_key:"canvas",ref:o},null,512)],512),a("div",fe,[a("div",{class:"controls"},[a("button",{class:"btn btn-mark",onClick:F},"RepÃ¨re"),a("button",{class:"btn btn-clear",onClick:J},"Effacer"),a("button",{class:"btn btn-new",onClick:T},"Nouveau")]),a("div",he,[e[6]||(e[6]=a("div",{class:"answer-label"},"Combien d'Ã©talons ?",-1)),a("div",me,[a("button",{class:"btn-counter btn-minus",onClick:Z},"âˆ’"),a("div",be,$(P(d)),1),a("button",{class:"btn-counter btn-plus",onClick:U},"+")]),a("button",{class:"btn btn-check",onClick:K},"VÃ©rifier"),a("div",{class:le(["feedback",P(_)])},$(P(p)),3)])])]))}},pe=ee(ge,[["__scopeId","data-v-22b77608"]]),Ce=JSON.parse('{"title":"","description":"","frontmatter":{"layout":false},"headers":[],"relativePath":"grandeurs-mesures/mesure-etalon.md","filePath":"grandeurs-mesures/mesure-etalon.md"}'),_e={name:"grandeurs-mesures/mesure-etalon.md"},ke=Object.assign(_e,{setup(G){return(x,o)=>(B(),I("div",null,[re(pe)]))}});export{Ce as __pageData,ke as default};
