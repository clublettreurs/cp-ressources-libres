import{_ as Z,p as d,v as ee,P as q,x as te,c as I,o as B,e as ae,j as n,k as P,a0 as ne,a2 as se,a3 as oe,t as W,n as ie,G as le}from"./chunks/framework.C0mo_YSU.js";const re={class:"exercise-wrapper"},ce={key:0,id:"confettiCanvas",class:"confetti-canvas"},ue={class:"menu-overlay"},de={class:"menu-card"},ve={class:"bottom-bar"},fe={class:"answer-section"},he={class:"answer-input"},me={class:"answer-display"},w=80,R=40,C=40,be={__name:"MesureEtalon",setup(G){const k=d(null),o=d(null);let a=null;const x=d(!1);let b=[],g=d(""),_=d(""),p=d(!1),S=[],y=null,c=50,v=100,A=!1,X=0,Y=0,l=0,r=0,f=0,D=0,u=d(0),h=0,m=0;function L(){if(!k.value)return;const t=k.value.getBoundingClientRect(),e=window.devicePixelRatio||1;h=t.width,m=t.height,o.value.width=t.width*e,o.value.height=t.height*e,o.value.style.width=t.width+"px",o.value.style.height=t.height+"px",a=o.value.getContext("2d"),a.setTransform(e,0,0,e,0,0)}function E(){!o.value||!a||(b=[],g.value="",_.value="",u.value=0,p.value=!1,M(),D=Math.floor(Math.random()*4)+3,f=D*w,l=(h-f)/2,r=m/2-C/2,c=(h-w)/2,v=m-R-20,T())}function T(){if(!a||!o.value)return;a.clearRect(0,0,h,m),a.fillStyle="#aed6ba",a.fillRect(l,r,f,C),a.strokeStyle="#000",a.lineWidth=3,a.lineCap="round",a.beginPath(),a.moveTo(l,r-8),a.lineTo(l,r+C+8),a.stroke(),a.beginPath(),a.moveTo(l+f,r-8),a.lineTo(l+f,r+C+8),a.stroke(),b.forEach(e=>{a.strokeStyle="#e84f6d",a.lineWidth=3,a.beginPath(),a.moveTo(e.x,r-10),a.lineTo(e.x,r+C+10),a.stroke()});const t=2;a.fillStyle="#fbb90d",a.beginPath(),a.roundRect(c,v,w,R,t),a.fill()}function z(t){const e=o.value.getBoundingClientRect(),i=h/e.width,s=m/e.height;return t.touches?{x:(t.touches[0].clientX-e.left)*i,y:(t.touches[0].clientY-e.top)*s}:{x:(t.clientX-e.left)*i,y:(t.clientY-e.top)*s}}function j(t,e){return t>=c&&t<=c+w&&e>=v-15&&e<=v+R+15}function H(t){t.preventDefault();const e=z(t);j(e.x,e.y)&&(A=!0,X=e.x-c,Y=e.y-v)}function O(t){if(!A)return;t.preventDefault();const e=z(t);c=e.x-X,v=e.y-Y,T()}function N(t){A=!1}function $(){const t=c+w;t>=l&&t<=l+f+5&&(b.some(i=>Math.abs(i.x-t)<10)||(b.push({x:t}),T()))}function F(){b=[],g.value="",_.value="",u.value=0,T()}function J(){u.value++}function U(){u.value>0&&u.value--}function K(){u.value===D?(g.value="üéâ Bravo ! C'est exact !",_.value="success",Q()):(g.value="‚ùå Essaie encore !",_.value="error",p.value=!1,M())}function Q(){p.value=!0,S=[];const t=["#2bb0a3","#aed6ba","#2e59a6","#53c2e2","#e84f6d","#f19bb1"];for(let e=0;e<150;e++)S.push({x:Math.random()*window.innerWidth,y:-20-Math.random()*100,size:Math.random()*10+5,color:t[Math.floor(Math.random()*t.length)],speedX:(Math.random()-.5)*4,speedY:Math.random()*3+2,rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*10});q(()=>{V()})}function V(){const t=document.getElementById("confettiCanvas");if(!t)return;const e=t.getContext("2d");t.width=window.innerWidth,t.height=window.innerHeight,e.clearRect(0,0,t.width,t.height);let i=0;S.forEach(s=>{s.x+=s.speedX,s.y+=s.speedY,s.rotation+=s.rotationSpeed,s.speedY+=.1,s.y<t.height+20&&(i++,e.save(),e.translate(s.x,s.y),e.rotate(s.rotation*Math.PI/180),e.fillStyle=s.color,e.fillRect(-s.size/2,-s.size/4,s.size,s.size/2),e.restore())}),i>0&&p.value?y=requestAnimationFrame(V):M()}function M(){y&&(cancelAnimationFrame(y),y=null)}return ee(()=>{q(()=>{setTimeout(()=>{L(),h>0&&m>0?E():setTimeout(()=>{L(),E()},100)},50)}),o.value.addEventListener("mousedown",H),o.value.addEventListener("mousemove",O),o.value.addEventListener("mouseup",N),o.value.addEventListener("mouseleave",N),o.value.addEventListener("touchstart",H,{passive:!1}),o.value.addEventListener("touchmove",O,{passive:!1}),o.value.addEventListener("touchend",N),window.addEventListener("resize",()=>{L(),E()})}),te(()=>{M()}),(t,e)=>(B(),I("div",re,[P(p)?(B(),I("canvas",ce)):ae("",!0),n("div",ue,[n("div",{class:"menu-toggle",onClick:e[0]||(e[0]=i=>x.value=!x.value)},[...e[2]||(e[2]=[n("span",{class:"burger-line"},null,-1),n("span",{class:"burger-line"},null,-1),n("span",{class:"burger-line"},null,-1)])]),ne(n("div",de,[n("div",{class:"menu-close",onClick:e[1]||(e[1]=i=>x.value=!1)},"‚úï"),e[3]||(e[3]=oe("",2))],512),[[se,x.value]])]),n("div",{class:"canvas-container",ref_key:"canvasContainer",ref:k},[n("canvas",{ref_key:"canvas",ref:o},null,512)],512),n("div",ve,[n("div",{class:"controls"},[n("button",{class:"btn btn-mark",onClick:$},"Rep√®re"),n("button",{class:"btn btn-clear",onClick:F},"Effacer"),n("button",{class:"btn btn-new",onClick:E},"Nouveau")]),n("div",fe,[e[4]||(e[4]=n("div",{class:"answer-label"},"Combien d'√©talons ?",-1)),n("div",he,[n("button",{class:"btn-counter btn-minus",onClick:U},"‚àí"),n("div",me,W(P(u)),1),n("button",{class:"btn-counter btn-plus",onClick:J},"+")]),n("button",{class:"btn btn-check",onClick:K},"V√©rifier"),n("div",{class:ie(["feedback",P(_)])},W(P(g)),3)])])]))}},ge=Z(be,[["__scopeId","data-v-e2b812f4"]]),we=JSON.parse('{"title":"","description":"","frontmatter":{"layout":false},"headers":[],"relativePath":"grandeurs-mesures/mesure-etalon.md","filePath":"grandeurs-mesures/mesure-etalon.md"}'),_e={name:"grandeurs-mesures/mesure-etalon.md"},Ce=Object.assign(_e,{setup(G){return(k,o)=>(B(),I("div",null,[le(ge)]))}});export{we as __pageData,Ce as default};
