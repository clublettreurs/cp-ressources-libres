import{_ as de,p as h,v as ve,x as fe,c as O,o as $,e as he,j as o,k as m,a0 as me,a1 as ne,a2 as ge,a3 as be,n as q,t as xe,P as ye,G as pe}from"./chunks/framework.C0mo_YSU.js";const Me={class:"exercise-wrapper"},Ce={key:0,id:"confettiCanvasChemins",class:"confetti-canvas"},_e={class:"menu-overlay"},ke={class:"menu-card"},we={class:"etalon-wrapper"},Pe={class:"bottom-bar"},Te={class:"answer-section"},Re={class:"path-buttons"},ae=80,Se={__name:"ComparerChemins",setup(se){const x=h(null),i=h(null),r=h(null),F=h(null);let n=null,P=[],N=!1,X=!1,T={x:0,y:0},D=0,p=h(""),M=h(""),C=h(!1),f=h(!1),g={x:0,y:0},b={x:0,y:0},u=[],d=[],R=0,S=0,H="",y=h(""),V=[],E=null;function G(){if(!x.value||!i.value)return;const e=x.value.getBoundingClientRect();i.value.width=e.width,i.value.height=e.height,n=i.value.getContext("2d"),r.value&&(r.value.style.left="20px",r.value.style.top=e.height-40+"px"),j()}function j(){r.value&&(r.value.style.transform=`rotate(${D}deg)`)}function z(){if(!i.value||(n||(n=i.value.getContext("2d")),!n))return;P=[],p.value="",M.value="",y.value="",C.value=!1,A();const e=i.value.width,t=i.value.height;if(e===0||t===0)return;const a=e/6;g={x:a,y:t/2},b={x:e-a,y:t/2};const s=Math.random()<.5;let l=0;do{s?(u=L(g,b,2,-1,.2),d=L(g,b,3,1,1.5)):(u=L(g,b,3,-1,1.5),d=L(g,b,2,1,.2)),R=J(u),S=J(d),l++;const v=Math.min(R,S);if((Math.max(R,S)-v)/v>=.3)break}while(l<50);H=R<S?"vert":"rose",W()}function L(e,t,a,s,l=.5){const v=[{...e}],_=(t.x-e.x)/a;for(let c=1;c<a;c++){const k=e.x+_*c+(Math.random()-.5)*30,w=40+l*80,Y=s*(Math.random()*w+30+l*50),B=e.y+Y+(Math.random()-.5)*20;v.push({x:k,y:Math.max(80,Math.min(i.value.height-120,B))})}return v.push({...t}),v}function J(e){let t=0;for(let a=0;a<e.length-1;a++){const s=e[a+1].x-e[a].x,l=e[a+1].y-e[a].y;t+=Math.sqrt(s*s+l*l)}return t}function U(e,t){if(e.length<2)return;n.strokeStyle=t,n.lineWidth=4,n.lineCap="round";const a=e[1],s=a.x-e[0].x,l=a.y-e[0].y,v=Math.sqrt(s*s+l*l),I=-l/v*12,_=s/v*12;n.beginPath(),n.moveTo(e[0].x+I,e[0].y+_),n.lineTo(e[0].x-I,e[0].y-_),n.stroke();const c=e.length-1,k=e[c].x-e[c-1].x,w=e[c].y-e[c-1].y,Y=Math.sqrt(k*k+w*w),B=-w/Y*12,te=k/Y*12;n.beginPath(),n.moveTo(e[c].x+B,e[c].y+te),n.lineTo(e[c].x-B,e[c].y-te),n.stroke()}function W(){if(!(!n||!i.value)&&(n.clearRect(0,0,i.value.width,i.value.height),!(u.length===0||d.length===0))){n.strokeStyle="#aed6ba",n.lineWidth=6,n.lineCap="round",n.lineJoin="round",n.beginPath(),n.moveTo(u[0].x,u[0].y);for(let e=1;e<u.length;e++)n.lineTo(u[e].x,u[e].y);n.stroke(),U(u,"#aed6ba"),n.strokeStyle="#f19bb1",n.lineWidth=6,n.beginPath(),n.moveTo(d[0].x,d[0].y);for(let e=1;e<d.length;e++)n.lineTo(d[e].x,d[e].y);n.stroke(),U(d,"#f19bb1"),n.font="70px serif",n.textAlign="center",n.textBaseline="middle",n.fillText("üè†",g.x-60,g.y),n.fillText("üè´",b.x+60,b.y),P.forEach(e=>{n.strokeStyle="#e84f6d",n.lineWidth=3,n.lineCap="round";const t=15,a=e.angle+Math.PI/2;n.beginPath(),n.moveTo(e.x+t*Math.cos(a),e.y+t*Math.sin(a)),n.lineTo(e.x-t*Math.cos(a),e.y-t*Math.sin(a)),n.stroke()})}}function oe(e){if(e.target===F.value)return;N=!0;const t=r.value.getBoundingClientRect();T.x=e.clientX-t.left,T.y=e.clientY-t.top-5}function le(e){e.stopPropagation(),X=!0}function K(e){if(!x.value||!r.value)return;const t=x.value.getBoundingClientRect();if(N){let a=e.clientX-t.left-T.x,s=e.clientY-t.top-T.y;a=Math.max(10,Math.min(t.width-20,a)),s=Math.max(30,Math.min(t.height-30,s)),r.value.style.left=a+"px",r.value.style.top=s+"px"}if(X){const a=r.value.getBoundingClientRect(),s=a.left,l=a.top+5;D=Math.atan2(e.clientY-l,e.clientX-s)*180/Math.PI,j()}}function Q(){N=!1,X=!1}function ie(){const e=D*Math.PI/180,t=parseFloat(r.value.style.left)||0,a=(parseFloat(r.value.style.top)||0)+3,s=t+ae*Math.cos(e),l=a+ae*Math.sin(e);P.push({x:s,y:l,angle:e}),W()}function re(){P=[],W()}function Z(e){y.value=e}function ce(){if(!y.value){p.value="Choisis un chemin !",M.value="error";return}y.value===H?(p.value="üéâ Bravo ! C'est exact !",M.value="success",ue()):(p.value="‚ùå Essaie encore !",M.value="error",C.value=!1,A())}function ue(){C.value=!0,V=[];const e=["#2bb0a3","#aed6ba","#2e59a6","#53c2e2","#e84f6d","#f19bb1"];for(let t=0;t<150;t++)V.push({x:Math.random()*window.innerWidth,y:-20-Math.random()*100,size:Math.random()*10+5,color:e[Math.floor(Math.random()*e.length)],speedX:(Math.random()-.5)*4,speedY:Math.random()*3+2,rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*10});ye(()=>{ee()})}function ee(){const e=document.getElementById("confettiCanvasChemins");if(!e)return;const t=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight,t.clearRect(0,0,e.width,e.height);let a=0;V.forEach(s=>{s.x+=s.speedX,s.y+=s.speedY,s.rotation+=s.rotationSpeed,s.speedY+=.1,s.y<e.height+20&&(a++,t.save(),t.translate(s.x,s.y),t.rotate(s.rotation*Math.PI/180),t.fillStyle=s.color,t.fillRect(-s.size/2,-s.size/4,s.size,s.size/2),t.restore())}),a>0&&C.value?E=requestAnimationFrame(ee):A()}function A(){E&&(cancelAnimationFrame(E),E=null)}return ve(()=>{requestAnimationFrame(()=>{G(),z()}),document.addEventListener("mousemove",K),document.addEventListener("mouseup",Q),window.addEventListener("resize",()=>{G(),z()})}),fe(()=>{document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",Q),A()}),(e,t)=>($(),O("div",Me,[m(C)?($(),O("canvas",Ce)):he("",!0),o("div",_e,[o("div",{class:"menu-toggle",onClick:t[0]||(t[0]=a=>ne(f)?f.value=!m(f):f=!m(f))},[...t[4]||(t[4]=[o("span",{class:"burger-line"},null,-1),o("span",{class:"burger-line"},null,-1),o("span",{class:"burger-line"},null,-1)])]),me(o("div",ke,[o("div",{class:"menu-close",onClick:t[1]||(t[1]=a=>ne(f)?f.value=!1:f=!1)},"‚úï"),t[5]||(t[5]=be('<div class="menu-section" data-v-e78538b1><strong data-v-e78538b1>üìç Navigation</strong><ul data-v-e78538b1><li data-v-e78538b1><a href="/cp-ressources-libres/" data-v-e78538b1>üè† Accueil</a></li><li data-v-e78538b1><a href="/cp-ressources-libres/grandeurs-mesures/" data-v-e78538b1>üìè Grandeurs et mesures</a></li><li data-v-e78538b1><a href="/cp-ressources-libres/grandeurs-mesures/comparer-chemins" data-v-e78538b1>‚Ä¢ Comparer chemins</a></li></ul></div><div class="menu-section" data-v-e78538b1><strong data-v-e78538b1>‚ùì Instructions</strong><ol data-v-e78538b1><li data-v-e78538b1>Mesure chaque chemin avec l&#39;√©talon</li><li data-v-e78538b1>Choisis le chemin le plus court</li><li data-v-e78538b1>V√©rifie ta r√©ponse</li></ol></div>',2))],512),[[ge,m(f)]])]),o("div",{class:"canvas-container",ref_key:"canvasContainer",ref:x},[o("canvas",{ref_key:"canvas",ref:i},null,512),o("div",{class:"etalon-container",ref_key:"etalonContainer",ref:r,onMousedown:oe},[o("div",we,[t[6]||(t[6]=o("div",{class:"etalon"},[o("div",{class:"etalon-arrow"})],-1)),o("div",{class:"rotate-handle",ref_key:"rotateHandle",ref:F,onMousedown:le},null,544)])],544)],512),o("div",Pe,[o("div",{class:"controls"},[o("button",{class:"btn btn-mark",onClick:ie},"Rep√®re"),o("button",{class:"btn btn-clear",onClick:re},"Effacer"),o("button",{class:"btn btn-new",onClick:z},"Nouveau")]),o("div",Te,[t[7]||(t[7]=o("div",{class:"answer-label"},"Le plus court :",-1)),o("div",Re,[o("button",{class:q(["btn-path btn-vert",{selected:m(y)==="vert"}]),onClick:t[2]||(t[2]=a=>Z("vert"))}," Vert ",2),o("button",{class:q(["btn-path btn-rose",{selected:m(y)==="rose"}]),onClick:t[3]||(t[3]=a=>Z("rose"))}," Rose ",2)]),o("button",{class:"btn btn-check",onClick:ce},"V√©rifier"),o("div",{class:q(["feedback",m(M)])},xe(m(p)),3)])])]))}},Ee=de(Se,[["__scopeId","data-v-e78538b1"]]),Ie=JSON.parse('{"title":"","description":"","frontmatter":{"layout":false},"headers":[],"relativePath":"grandeurs-mesures/comparer-chemins.md","filePath":"grandeurs-mesures/comparer-chemins.md"}'),Le={name:"grandeurs-mesures/comparer-chemins.md"},Ye=Object.assign(Le,{setup(se){return(x,i)=>($(),O("div",null,[pe(Ee)]))}});export{Ie as __pageData,Ye as default};
