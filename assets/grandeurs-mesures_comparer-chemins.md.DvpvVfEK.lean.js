import{_ as he,p as h,v as me,P as se,x as ge,c as F,o as G,e as xe,j as o,k as m,a0 as ye,a1 as oe,a2 as pe,a3 as be,n as H,t as Me,G as Ce}from"./chunks/framework.C0mo_YSU.js";const _e={class:"exercise-wrapper"},ke={key:0,id:"confettiCanvasChemins",class:"confetti-canvas"},we={class:"menu-overlay"},Pe={class:"menu-card"},Te={class:"etalon-wrapper"},Re={class:"bottom-bar"},Le={class:"answer-section"},Se={class:"path-buttons"},le=80,Ee={__name:"ComparerChemins",setup(ie){const y=h(null),c=h(null),l=h(null),j=h(null);let n=null,R=[],V=!1,W=!1,L={x:0,y:0},z=0,M=h(""),C=h(""),_=h(!1),v=h(!1),g={x:0,y:0},x={x:0,y:0},u=[],d=[],S=0,E=0,J="",p=h(""),O=[],I=null,k=0,b=0;function $(){if(!y.value||!c.value)return;const e=y.value.getBoundingClientRect(),t=window.devicePixelRatio||1;k=e.width,b=e.height,c.value.width=e.width*t,c.value.height=e.height*t,c.value.style.width=e.width+"px",c.value.style.height=e.height+"px",n=c.value.getContext("2d"),n.setTransform(t,0,0,t,0,0),l.value&&(l.value.style.left=(k-80)/2+"px",l.value.style.top=b-40+"px"),U()}function U(){l.value&&(l.value.style.transform=`rotate(${z}deg)`)}function A(){if(!c.value||(n||(n=c.value.getContext("2d")),!n))return;R=[],M.value="",C.value="",p.value="",_.value=!1,B();const e=k,t=b;if(e===0||t===0)return;const a=e/6;g={x:a,y:t/2},x={x:e-a,y:t/2};const s=Math.random()<.5;let i=0;do{s?(u=Y(g,x,2,-1,.2),d=Y(g,x,3,1,1.5)):(u=Y(g,x,3,-1,1.5),d=Y(g,x,2,1,.2)),S=K(u),E=K(d),i++;const f=Math.min(S,E);if((Math.max(S,E)-f)/f>=.3)break}while(i<50);J=S<E?"vert":"rose",q()}function Y(e,t,a,s,i=.5){const f=[{...e}],w=(t.x-e.x)/a;for(let r=1;r<a;r++){const P=e.x+w*r+(Math.random()-.5)*30,T=40+i*80,X=s*(Math.random()*T+30+i*50),D=e.y+X+(Math.random()-.5)*20;f.push({x:P,y:Math.max(80,Math.min(b-120,D))})}return f.push({...t}),f}function K(e){let t=0;for(let a=0;a<e.length-1;a++){const s=e[a+1].x-e[a].x,i=e[a+1].y-e[a].y;t+=Math.sqrt(s*s+i*i)}return t}function Q(e,t){if(e.length<2)return;n.strokeStyle=t,n.lineWidth=4,n.lineCap="round";const a=e[1],s=a.x-e[0].x,i=a.y-e[0].y,f=Math.sqrt(s*s+i*i),N=-i/f*12,w=s/f*12;n.beginPath(),n.moveTo(e[0].x+N,e[0].y+w),n.lineTo(e[0].x-N,e[0].y-w),n.stroke();const r=e.length-1,P=e[r].x-e[r-1].x,T=e[r].y-e[r-1].y,X=Math.sqrt(P*P+T*T),D=-T/X*12,ae=P/X*12;n.beginPath(),n.moveTo(e[r].x+D,e[r].y+ae),n.lineTo(e[r].x-D,e[r].y-ae),n.stroke()}function q(){if(!(!n||!c.value)&&(n.clearRect(0,0,k,b),!(u.length===0||d.length===0))){n.strokeStyle="#aed6ba",n.lineWidth=6,n.lineCap="round",n.lineJoin="round",n.beginPath(),n.moveTo(u[0].x,u[0].y);for(let e=1;e<u.length;e++)n.lineTo(u[e].x,u[e].y);n.stroke(),Q(u,"#aed6ba"),n.strokeStyle="#f19bb1",n.lineWidth=6,n.beginPath(),n.moveTo(d[0].x,d[0].y);for(let e=1;e<d.length;e++)n.lineTo(d[e].x,d[e].y);n.stroke(),Q(d,"#f19bb1"),n.font="70px serif",n.textAlign="center",n.textBaseline="middle",n.fillText("üè†",g.x-60,g.y),n.fillText("üè´",x.x+60,x.y),R.forEach(e=>{n.strokeStyle="#e84f6d",n.lineWidth=3,n.lineCap="round";const t=15,a=e.angle+Math.PI/2;n.beginPath(),n.moveTo(e.x+t*Math.cos(a),e.y+t*Math.sin(a)),n.lineTo(e.x-t*Math.cos(a),e.y-t*Math.sin(a)),n.stroke()})}}function re(e){if(e.target===j.value)return;V=!0,l.value.classList.add("dragging");const t=l.value.getBoundingClientRect();L.x=e.clientX-t.left,L.y=e.clientY-t.top-5}function ce(e){e.stopPropagation(),W=!0}function Z(e){if(!y.value||!l.value)return;const t=y.value.getBoundingClientRect();if(V){let a=e.clientX-t.left-L.x,s=e.clientY-t.top-L.y;a=Math.max(10,Math.min(t.width-20,a)),s=Math.max(30,Math.min(t.height-30,s)),l.value.style.left=a+"px",l.value.style.top=s+"px"}if(W){const a=l.value.getBoundingClientRect(),s=a.left,i=a.top+5;z=Math.atan2(e.clientY-i,e.clientX-s)*180/Math.PI,U()}}function ee(){V=!1,W=!1,l.value&&l.value.classList.remove("dragging")}function ue(){const e=z*Math.PI/180,t=parseFloat(l.value.style.left)||0,a=(parseFloat(l.value.style.top)||0)+3,s=t+le*Math.cos(e),i=a+le*Math.sin(e);R.push({x:s,y:i,angle:e}),q()}function de(){R=[],q()}function te(e){p.value=e}function fe(){if(!p.value){M.value="Choisis un chemin !",C.value="error";return}p.value===J?(M.value="üéâ Bravo ! C'est exact !",C.value="success",ve()):(M.value="‚ùå Essaie encore !",C.value="error",_.value=!1,B())}function ve(){_.value=!0,O=[];const e=["#2bb0a3","#aed6ba","#2e59a6","#53c2e2","#e84f6d","#f19bb1"];for(let t=0;t<150;t++)O.push({x:Math.random()*window.innerWidth,y:-20-Math.random()*100,size:Math.random()*10+5,color:e[Math.floor(Math.random()*e.length)],speedX:(Math.random()-.5)*4,speedY:Math.random()*3+2,rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*10});se(()=>{ne()})}function ne(){const e=document.getElementById("confettiCanvasChemins");if(!e)return;const t=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight,t.clearRect(0,0,e.width,e.height);let a=0;O.forEach(s=>{s.x+=s.speedX,s.y+=s.speedY,s.rotation+=s.rotationSpeed,s.speedY+=.1,s.y<e.height+20&&(a++,t.save(),t.translate(s.x,s.y),t.rotate(s.rotation*Math.PI/180),t.fillStyle=s.color,t.fillRect(-s.size/2,-s.size/4,s.size,s.size/2),t.restore())}),a>0&&_.value?I=requestAnimationFrame(ne):B()}function B(){I&&(cancelAnimationFrame(I),I=null)}return me(()=>{se(()=>{setTimeout(()=>{$(),k>0&&b>0?A():setTimeout(()=>{$(),A()},100)},50)}),document.addEventListener("mousemove",Z),document.addEventListener("mouseup",ee),window.addEventListener("resize",()=>{$(),A()})}),ge(()=>{document.removeEventListener("mousemove",Z),document.removeEventListener("mouseup",ee),B()}),(e,t)=>(G(),F("div",_e,[m(_)?(G(),F("canvas",ke)):xe("",!0),o("div",we,[o("div",{class:"menu-toggle",onClick:t[0]||(t[0]=a=>oe(v)?v.value=!m(v):v=!m(v))},[...t[4]||(t[4]=[o("span",{class:"burger-line"},null,-1),o("span",{class:"burger-line"},null,-1),o("span",{class:"burger-line"},null,-1)])]),ye(o("div",Pe,[o("div",{class:"menu-close",onClick:t[1]||(t[1]=a=>oe(v)?v.value=!1:v=!1)},"‚úï"),t[5]||(t[5]=be("",2))],512),[[pe,m(v)]])]),o("div",{class:"canvas-container",ref_key:"canvasContainer",ref:y},[o("canvas",{ref_key:"canvas",ref:c},null,512),o("div",{class:"etalon-container",ref_key:"etalonContainer",ref:l,onMousedown:re},[o("div",Te,[t[6]||(t[6]=o("div",{class:"etalon"},[o("div",{class:"etalon-arrow"})],-1)),o("div",{class:"rotate-handle",ref_key:"rotateHandle",ref:j,onMousedown:ce},null,544)])],544)],512),o("div",Re,[o("div",{class:"controls"},[o("button",{class:"btn btn-mark",onClick:ue},"Rep√®re"),o("button",{class:"btn btn-clear",onClick:de},"Effacer"),o("button",{class:"btn btn-new",onClick:A},"Nouveau")]),o("div",Le,[t[7]||(t[7]=o("div",{class:"answer-label"},"Le plus court :",-1)),o("div",Se,[o("button",{class:H(["btn-path btn-vert",{selected:m(p)==="vert"}]),onClick:t[2]||(t[2]=a=>te("vert"))}," Vert ",2),o("button",{class:H(["btn-path btn-rose",{selected:m(p)==="rose"}]),onClick:t[3]||(t[3]=a=>te("rose"))}," Rose ",2)]),o("button",{class:"btn btn-check",onClick:fe},"V√©rifier"),o("div",{class:H(["feedback",m(C)])},Me(m(M)),3)])])]))}},Ie=he(Ee,[["__scopeId","data-v-4e7f638f"]]),Be=JSON.parse('{"title":"","description":"","frontmatter":{"layout":false},"headers":[],"relativePath":"grandeurs-mesures/comparer-chemins.md","filePath":"grandeurs-mesures/comparer-chemins.md"}'),Ae={name:"grandeurs-mesures/comparer-chemins.md"},Ne=Object.assign(Ae,{setup(ie){return(y,c)=>(G(),F("div",null,[Ce(Ie)]))}});export{Be as __pageData,Ne as default};
